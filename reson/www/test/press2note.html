<!DOCTYPE html>
<html>

<head>

<script type="module">

import { pressed, updown2note_build, note2onoff_build }
 from "../press2note.js";

function test_main() {
  const result = document.getElementById("result");
  result.innerText += "\n";
  result.innerText += JSON.stringify(pressed);
  result.innerText += "\n";
  result.innerText += JSON.stringify(pressed.on("KeyZ"));
  result.innerText += "\n";
  result.innerText += JSON.stringify(pressed.on("KeyZ"));
  result.innerText += "\n";
  result.innerText += JSON.stringify(pressed.off("KeyZ"));
  result.innerText += "\n";
  result.innerText += JSON.stringify(pressed.on("KeyZ"));
  result.innerText += "\n";
  result.innerText += JSON.stringify(pressed.on("Digit2"));
  result.innerText += "\n";
  result.innerText += JSON.stringify(pressed.off("KeyZ"));
  result.innerText += "\n";
  result.innerText += JSON.stringify(pressed.off("Digit2"));
  result.innerText += "\n";
}

function test_main2() {
  const notekey = [
   ["KeyZ", "Digit3"],
   ["KeyS"] ];
  const result = document.getElementById("result");

  let val = updown2note_build(notekey);
  val = JSON.stringify(val);
  let expc = {
   "KeyZ"  : 0,
   "Digit3": 0,
   "KeyS"  : 1
  };
  expc = JSON.stringify(expc);
  if (val === expc) {
    result.innerText += "[OK]\n";
  } else {
    result.innerText += "[ER]\n";
    result.innerText += "val:\n";
    result.innerText += val + "\n";
    result.innerText += "expc:\n";
    result.innerText += expc + "\n";
  }
}

function test_main3() {
  const notekey = [
   ["KeyZ", "Digit3"],
   ["KeyS"] ];
  const result = document.getElementById("result");

  let val = note2onoff_build(notekey);
  val = JSON.stringify(val);
  let expc = [
   { "KeyZ"  : false,
     "Digit3": false },
   { "KeyS"  : false }
  ];
  expc = JSON.stringify(expc);
  if (val === expc) {
    result.innerText += "[OK]\n";
  } else {
    result.innerText += "[ER]\n";
    result.innerText += "val:\n";
    result.innerText += val + "\n";
    result.innerText += "expc:\n";
    result.innerText += expc + "\n";
  }
}

test_main();
test_main2();
test_main3();

</script>

</head>

<body>
<div id="result">Test result:</div>
</body>

</html>
